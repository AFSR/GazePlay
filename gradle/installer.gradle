task generateInstaller(dependsOn: ['packageApp']) {
    def innoSetupDir = new File("${buildDir}/innosetup")

    innoSetupDir.mkdir()

    copy {
        from("${rootProject.projectDir}/gradle/innosetup/setup.iss.skel")
        rename("setup.iss.skel", "setup.iss")
        expand([
                applicationVersion: "${version}"
        ])
        into(innoSetupDir)
    }

    exec {
        workingDir rootProject.projectDir
        commandLine "C:\\Program Files (x86)\\Inno Setup 6\\ISCC.exe ${innoSetupDir}\\setup.iss".split()
    }
}
