def jdkSource = project.ext.jdkSource
def jdkTag = project.ext.jdkTag
def jdkVersion = project.ext.jdkVersion
def jdkFolder = project.ext.jdkFolder
def downloadLocation = project.ext.downloadLocation
def jmodsSource = project.ext.jmodsSource
def jmodsVersion = project.ext.jmodsVersion

task downloadWindows64JDK(type: Download, group: 'custom jre') {
    src "${jdkSource}/jdk-${jdkTag}/OpenJDK11U-jdk_x64_windows_hotspot_${jdkVersion}.zip"
    dest new File("${downloadLocation}/jre", 'windows-x64.zip')
    overwrite false
}

task downloadWindows86JDK(type: Download, group: 'custom jre') {
    src "${jdkSource}/jdk-${jdkTag}/OpenJDK11U-jdk_x86_windows_hotspot_${jdkVersion}.zip"
    dest new File("${downloadLocation}/jre", 'windows-x86.zip')
    overwrite false
}

task downloadWindowsJmods(type: Download, group: 'custom jre') {
    src "${jmodsSource}-windows"
    dest new File("${downloadLocation}/jre", 'windows-jmods.zip')
    overwrite false
}

task downloadAndExtractWindows64JDK(dependsOn: downloadWindows64JDK, type: Copy, group: 'custom jre') {
    from zipTree(downloadWindows64JDK.dest)
    into "${downloadLocation}/jre/windows-x64"
}

task downloadAndExtractWindows86JDK(dependsOn: downloadWindows86JDK, type: Copy, group: 'custom jre') {
    from zipTree(downloadWindows86JDK.dest)
    into "${downloadLocation}/jre/windows-x86"
}

task downloadAndExtractWindowsJmods(dependsOn: downloadWindowsJmods, type: Copy, group: 'custom jre') {
    from zipTree(downloadWindowsJmods.dest)
    into "${downloadLocation}/jre/windows-jmods"
}

task addJmodsToWindows64JDK(dependsOn: [downloadAndExtractWindowsJmods, downloadAndExtractWindows64JDK], type: Copy, group: 'custom jre') {
    from "${downloadAndExtractWindowsJmods.destinationDir}/javafx-jmods-${jmodsVersion}"
    into "${downloadAndExtractWindows64JDK.destinationDir}/${jdkFolder}/jmods"
}

task addJmodsToWindows86JDK(dependsOn: [downloadAndExtractWindowsJmods, downloadAndExtractWindows86JDK], type: Copy, group: 'custom jre') {
    from "${downloadAndExtractWindowsJmods.destinationDir}/javafx-jmods-${jmodsVersion}"
    into "${downloadAndExtractWindows86JDK.destinationDir}/${jdkFolder}/jmods"
}
